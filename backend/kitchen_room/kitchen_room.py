from flask import Flask, request, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

# Dictionary containing recipes in Tunisian dialect
recipes = {
    "ูููุฉ ูุทูุจ ุงููุณูุณู": """ุจุงุด ุชุทูุจ ุงููุณูุณูุ ูุงุฒูู: 
    - 500ุบ ูุณูุณู 
    - 300ุบ ูุญู (ุฎุฑูู ููุง ุฏุฌุงุฌ)
    - ุจุตูุ ุทูุงุทูุ ููููุ ุญูุต
    - ุฒูุช ุฒูุชููุ ููุญุ ูููู ุฃูุญูุ ุชุงุจู ููุฑููุฉ

    ุทุฑููุฉ ุงูุชุญุถูุฑ:
    1. ุณุฎูู ุงูุฒูุช ูู ุงููุณูุงุณ ูุถูู ุงูุจุตู ุงูููุฑูู ูุงููุญู ูููููู ูููุญ.
    2. ุถูู ุงูุทูุงุทู ุงููุตุจูุฑุฉ ูุงูุชูุงุจูุ ูุจุนุฏ ุตุจ ุดููุฉ ูุงุก ูุฎูููุง ุชุทุจุฎ.
    3. ุฒูุฏ ุงูุญูุต ูุงูุฎุถุฑุฉ ุญุณุจ ุงูุฑุบุจุฉุ ูุจุนุฏ ุตุจ ุดููุฉ ูุงุก ุณุฎูู.
    4. ูู ููุณ ุงูููุชุ ุจูู ุงููุณูุณู ุจุดููุฉ ูุงุก ูุฒูุชุ ูููุฑูู ูู ุงููุณูุงุณ ููู ุงููุฑูุฉ.
    5. ูุฑุฑ ุนูููุฉ ุงูุชุจุฎูุฑ ูุฑุชูู ุฃู ุซูุงุซุฉ ุญุชู ูููู ุงููุณูุณู ุทุฑู ููุฐูุฐ.
    6. ูู ูุทูุจุ ุตุจู ุงููุณูุณู ูู ุทุจู ูุจูุฑ ูุฎููุทู ุจุงููุฑูุฉ ูุงููุญูุ ููุฏูู ุจุงูุตุญุฉ ูุงูุนุงููุฉ!"""
}

@app.route('/generate', methods=['POST'])
def generate():
    data = request.json
    query = data.get('query', '').strip()  # Get the query in Tunisian dialect

    # Check if the query exists in our predefined recipes
    response = recipes.get(query, "ูุง ูุนุฑุดุ ุฃูุง ูุฌูู ุชุณุฃู ุนูู ูุตูุฉ ุฃุฎุฑู ๐ธ")

    return jsonify({"response_tn": response})  # Correct format: dictionary with key-value pair

if __name__ == '__main__':
    app.run(debug=True)
